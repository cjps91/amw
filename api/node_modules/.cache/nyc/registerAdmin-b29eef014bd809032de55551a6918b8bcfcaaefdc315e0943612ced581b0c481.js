function cov_be3sw3w15(){var path="/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/registerAdmin.js";var hash="db3cf1cb016670bd9e3a14065528ae9ffe7ddcef";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/registerAdmin.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:18}},"1":{start:{line:5,column:26},end:{line:5,column:54}},"2":{start:{line:6,column:15},end:{line:6,column:34}},"3":{start:{line:8,column:0},end:{line:25,column:1}},"4":{start:{line:9,column:4},end:{line:9,column:22}},"5":{start:{line:10,column:4},end:{line:10,column:24}},"6":{start:{line:11,column:4},end:{line:11,column:30}},"7":{start:{line:13,column:4},end:{line:24,column:8}},"8":{start:{line:14,column:8},end:{line:23,column:9}},"9":{start:{line:15,column:25},end:{line:15,column:60}},"10":{start:{line:17,column:12},end:{line:17,column:69}},"11":{start:{line:19,column:12},end:{line:20,column:63}},"12":{start:{line:20,column:16},end:{line:20,column:63}},"13":{start:{line:22,column:12},end:{line:22,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:17},end:{line:8,column:18}},loc:{start:{line:8,column:44},end:{line:25,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:12},end:{line:13,column:13}},loc:{start:{line:13,column:24},end:{line:24,column:5}},line:13}},branchMap:{"0":{loc:{start:{line:19,column:12},end:{line:20,column:63}},type:"if",locations:[{start:{line:19,column:12},end:{line:20,column:63}},{start:{line:19,column:12},end:{line:20,column:63}}],line:19}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"db3cf1cb016670bd9e3a14065528ae9ffe7ddcef"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_be3sw3w15=function(){return actualCoverage;};}return actualCoverage;}cov_be3sw3w15();const{validators:{validateName,validateEmail,validatePassword},errors:{DuplicityError}}=(cov_be3sw3w15().s[0]++,require('com'));const{Administrator}=(cov_be3sw3w15().s[1]++,require('../../data/models'));const bcrypt=(cov_be3sw3w15().s[2]++,require('bcryptjs'));cov_be3sw3w15().s[3]++;module.exports=(name,email,password)=>{cov_be3sw3w15().f[0]++;cov_be3sw3w15().s[4]++;validateName(name);cov_be3sw3w15().s[5]++;validateEmail(email);cov_be3sw3w15().s[6]++;validatePassword(password);cov_be3sw3w15().s[7]++;return(async()=>{cov_be3sw3w15().f[1]++;cov_be3sw3w15().s[8]++;try{const hash=(cov_be3sw3w15().s[9]++,await bcrypt.hashSync(password,10));cov_be3sw3w15().s[10]++;await Administrator.create({name,email,password:hash});}catch(error){cov_be3sw3w15().s[11]++;if(error.message.includes('E11000')){cov_be3sw3w15().b[0][0]++;cov_be3sw3w15().s[12]++;throw new DuplicityError(`user already exists`);}else{cov_be3sw3w15().b[0][1]++;}cov_be3sw3w15().s[13]++;throw error;}})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfYmUzc3czdzE1IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0b3JzIiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVFbWFpbCIsInZhbGlkYXRlUGFzc3dvcmQiLCJlcnJvcnMiLCJEdXBsaWNpdHlFcnJvciIsInMiLCJyZXF1aXJlIiwiQWRtaW5pc3RyYXRvciIsImJjcnlwdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImYiLCJoYXNoIiwiaGFzaFN5bmMiLCJjcmVhdGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImIiXSwic291cmNlcyI6WyJyZWdpc3RlckFkbWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtcbiAgICB2YWxpZGF0b3JzOiB7IHZhbGlkYXRlTmFtZSwgdmFsaWRhdGVFbWFpbCwgdmFsaWRhdGVQYXNzd29yZCB9LFxuICAgIGVycm9yczogeyBEdXBsaWNpdHlFcnJvciB9XG59ID0gcmVxdWlyZSgnY29tJylcbmNvbnN0IHsgQWRtaW5pc3RyYXRvciB9ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9tb2RlbHMnKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IChuYW1lLCBlbWFpbCwgcGFzc3dvcmQpID0+IHtcbiAgICB2YWxpZGF0ZU5hbWUobmFtZSlcbiAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaFN5bmMocGFzc3dvcmQsIDEwKVxuXG4gICAgICAgICAgICBhd2FpdCBBZG1pbmlzdHJhdG9yLmNyZWF0ZSh7bmFtZSwgZW1haWwsIHBhc3N3b3JkOiBoYXNofSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFMTEwMDAnKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRHVwbGljaXR5RXJyb3IoYHVzZXIgYWxyZWFkeSBleGlzdHNgKVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgfSkoKVxufSJdLCJtYXBwaW5ncyI6ImdqRUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQ0ZFLFVBQVUsQ0FBRSxDQUFFQyxZQUFZLENBQUVDLGFBQWEsQ0FBRUMsZ0JBQWlCLENBQUMsQ0FDN0RDLE1BQU0sQ0FBRSxDQUFFQyxjQUFlLENBQzdCLENBQUMsRUFBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxhQUFjLENBQUMsRUFBQVYsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUN0RCxLQUFNLENBQUFFLE1BQU0sRUFBQVgsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBQVQsYUFBQSxHQUFBUSxDQUFBLE1BRWxDSSxNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUFDQyxJQUFJLENBQUVDLEtBQUssQ0FBRUMsUUFBUSxHQUFLLENBQUFoQixhQUFBLEdBQUFpQixDQUFBLE1BQUFqQixhQUFBLEdBQUFRLENBQUEsTUFDeENMLFlBQVksQ0FBQ1csSUFBSSxDQUFDLENBQUFkLGFBQUEsR0FBQVEsQ0FBQSxNQUNsQkosYUFBYSxDQUFDVyxLQUFLLENBQUMsQ0FBQWYsYUFBQSxHQUFBUSxDQUFBLE1BQ3BCSCxnQkFBZ0IsQ0FBQ1csUUFBUSxDQUFDLENBQUFoQixhQUFBLEdBQUFRLENBQUEsTUFFMUIsTUFBTyxDQUFDLFNBQVksQ0FBQVIsYUFBQSxHQUFBaUIsQ0FBQSxNQUFBakIsYUFBQSxHQUFBUSxDQUFBLE1BQ2hCLEdBQUksQ0FDQSxLQUFNLENBQUFVLElBQUksRUFBQWxCLGFBQUEsR0FBQVEsQ0FBQSxNQUFHLEtBQU0sQ0FBQUcsTUFBTSxDQUFDUSxRQUFRLENBQUNILFFBQVEsQ0FBRSxFQUFFLENBQUMsRUFBQWhCLGFBQUEsR0FBQVEsQ0FBQSxPQUVoRCxLQUFNLENBQUFFLGFBQWEsQ0FBQ1UsTUFBTSxDQUFDLENBQUNOLElBQUksQ0FBRUMsS0FBSyxDQUFFQyxRQUFRLENBQUVFLElBQUksQ0FBQyxDQUFDLENBQzdELENBQUUsTUFBT0csS0FBSyxDQUFFLENBQUFyQixhQUFBLEdBQUFRLENBQUEsT0FDWixHQUFJYSxLQUFLLENBQUNDLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUNoQyxDQUFBdkIsYUFBQSxHQUFBd0IsQ0FBQSxTQUFBeEIsYUFBQSxHQUFBUSxDQUFBLFlBQU0sSUFBSSxDQUFBRCxjQUFjLENBQUUscUJBQW9CLENBQUMsQ0FBRCxDQUFDLEtBQUFQLGFBQUEsR0FBQXdCLENBQUEsVUFBQXhCLGFBQUEsR0FBQVEsQ0FBQSxPQUVuRCxLQUFNLENBQUFhLEtBQUssQ0FDZixDQUNKLENBQUMsRUFBRSxDQUFDLENBQ1IsQ0FBQyJ9