function cov_121dcanj3e(){var path="/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/deleteAdmin.js";var hash="fde16fab1fd9868ed81b132323d0f9df76e19bf6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/deleteAdmin.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:18}},"1":{start:{line:5,column:26},end:{line:5,column:54}},"2":{start:{line:6,column:15},end:{line:6,column:34}},"3":{start:{line:8,column:2},end:{line:27,column:3}},"4":{start:{line:10,column:4},end:{line:10,column:43}},"5":{start:{line:11,column:4},end:{line:11,column:42}},"6":{start:{line:12,column:4},end:{line:12,column:62}},"7":{start:{line:14,column:4},end:{line:14,column:109}},"8":{start:{line:14,column:35},end:{line:14,column:109}},"9":{start:{line:16,column:4},end:{line:25,column:6}},"10":{start:{line:18,column:8},end:{line:18,column:72}},"11":{start:{line:18,column:20},end:{line:18,column:72}},"12":{start:{line:20,column:22},end:{line:20,column:66}},"13":{start:{line:22,column:8},end:{line:22,column:57}},"14":{start:{line:22,column:20},end:{line:22,column:57}},"15":{start:{line:24,column:8},end:{line:24,column:54}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:19},end:{line:8,column:20}},loc:{start:{line:8,column:64},end:{line:27,column:3}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:48},end:{line:16,column:49}},loc:{start:{line:16,column:59},end:{line:25,column:5}},line:16}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:14,column:109}},type:"if",locations:[{start:{line:14,column:4},end:{line:14,column:109}},{start:{line:14,column:4},end:{line:14,column:109}}],line:14},"1":{loc:{start:{line:18,column:8},end:{line:18,column:72}},type:"if",locations:[{start:{line:18,column:8},end:{line:18,column:72}},{start:{line:18,column:8},end:{line:18,column:72}}],line:18},"2":{loc:{start:{line:22,column:8},end:{line:22,column:57}},type:"if",locations:[{start:{line:22,column:8},end:{line:22,column:57}},{start:{line:22,column:8},end:{line:22,column:57}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fde16fab1fd9868ed81b132323d0f9df76e19bf6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_121dcanj3e=function(){return actualCoverage;};}return actualCoverage;}cov_121dcanj3e();const{validators:{validateId,validatePassword},errors:{ExistenceError,ContentError,AuthError}}=(cov_121dcanj3e().s[0]++,require('com'));const{Administrator}=(cov_121dcanj3e().s[1]++,require('../../data/models'));const bcrypt=(cov_121dcanj3e().s[2]++,require('bcryptjs'));cov_121dcanj3e().s[3]++;module.exports=function(adminId,password,passwordConfirm){cov_121dcanj3e().f[0]++;cov_121dcanj3e().s[4]++;validateId(adminId,'Administrator ID');cov_121dcanj3e().s[5]++;validatePassword(password,'Password');cov_121dcanj3e().s[6]++;validatePassword(passwordConfirm,'Password Confirmation');cov_121dcanj3e().s[7]++;if(password!==passwordConfirm){cov_121dcanj3e().b[0][0]++;cov_121dcanj3e().s[8]++;throw new ContentError('Password and confirmation do NOT match. Check it');}else{cov_121dcanj3e().b[0][1]++;}cov_121dcanj3e().s[9]++;return Administrator.findById(adminId).then(admin=>{cov_121dcanj3e().f[1]++;cov_121dcanj3e().s[10]++;if(!admin){cov_121dcanj3e().b[1][0]++;cov_121dcanj3e().s[11]++;throw new ExistenceError('Administrator not found!');}else{cov_121dcanj3e().b[1][1]++;}const match=(cov_121dcanj3e().s[12]++,bcrypt.compareSync(password,admin.password));cov_121dcanj3e().s[13]++;if(!match){cov_121dcanj3e().b[2][0]++;cov_121dcanj3e().s[14]++;throw new AuthError('Wrong password');}else{cov_121dcanj3e().b[2][1]++;}cov_121dcanj3e().s[15]++;return Administrator.deleteOne({_id:adminId});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTIxZGNhbmozZSIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlSWQiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwiZXJyb3JzIiwiRXhpc3RlbmNlRXJyb3IiLCJDb250ZW50RXJyb3IiLCJBdXRoRXJyb3IiLCJzIiwicmVxdWlyZSIsIkFkbWluaXN0cmF0b3IiLCJiY3J5cHQiLCJtb2R1bGUiLCJleHBvcnRzIiwiYWRtaW5JZCIsInBhc3N3b3JkIiwicGFzc3dvcmRDb25maXJtIiwiZiIsImIiLCJmaW5kQnlJZCIsInRoZW4iLCJhZG1pbiIsIm1hdGNoIiwiY29tcGFyZVN5bmMiLCJkZWxldGVPbmUiLCJfaWQiXSwic291cmNlcyI6WyJkZWxldGVBZG1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gICAgdmFsaWRhdG9yczogeyB2YWxpZGF0ZUlkLCB2YWxpZGF0ZVBhc3N3b3JkIH0sXG4gICAgZXJyb3JzOiB7RXhpc3RlbmNlRXJyb3IsIENvbnRlbnRFcnJvciwgQXV0aEVycm9yfVxufSA9IHJlcXVpcmUoJ2NvbScpXG5jb25zdCB7IEFkbWluaXN0cmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uL2RhdGEvbW9kZWxzJylcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcbiAgXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFkbWluSWQsIHBhc3N3b3JkLCBwYXNzd29yZENvbmZpcm0pe1xuXG4gICAgdmFsaWRhdGVJZChhZG1pbklkLCAnQWRtaW5pc3RyYXRvciBJRCcpXG4gICAgdmFsaWRhdGVQYXNzd29yZChwYXNzd29yZCwgJ1Bhc3N3b3JkJylcbiAgICB2YWxpZGF0ZVBhc3N3b3JkKHBhc3N3b3JkQ29uZmlybSwgJ1Bhc3N3b3JkIENvbmZpcm1hdGlvbicpXG5cbiAgICBpZihwYXNzd29yZCE9PXBhc3N3b3JkQ29uZmlybSkgdGhyb3cgbmV3IENvbnRlbnRFcnJvcignUGFzc3dvcmQgYW5kIGNvbmZpcm1hdGlvbiBkbyBOT1QgbWF0Y2guIENoZWNrIGl0JylcblxuICAgIHJldHVybiBBZG1pbmlzdHJhdG9yLmZpbmRCeUlkKGFkbWluSWQpLnRoZW4oKGFkbWluKSA9PiB7XG5cbiAgICAgICAgaWYgKCFhZG1pbikgdGhyb3cgbmV3IEV4aXN0ZW5jZUVycm9yKCdBZG1pbmlzdHJhdG9yIG5vdCBmb3VuZCEnKVxuXG4gICAgICAgIGNvbnN0IG1hdGNoID0gYmNyeXB0LmNvbXBhcmVTeW5jKHBhc3N3b3JkLCBhZG1pbi5wYXNzd29yZClcblxuICAgICAgICBpZiAoIW1hdGNoKSB0aHJvdyBuZXcgQXV0aEVycm9yKCdXcm9uZyBwYXNzd29yZCcpXG5cbiAgICAgICAgcmV0dXJuIEFkbWluaXN0cmF0b3IuZGVsZXRlT25lKHtfaWQ6IGFkbWluSWR9KVxuICAgIH0pXG5cbiAgfSJdLCJtYXBwaW5ncyI6InFrRkFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQ0ZFLFVBQVUsQ0FBRSxDQUFFQyxVQUFVLENBQUVDLGdCQUFpQixDQUFDLENBQzVDQyxNQUFNLENBQUUsQ0FBQ0MsY0FBYyxDQUFFQyxZQUFZLENBQUVDLFNBQVMsQ0FDcEQsQ0FBQyxFQUFBUixjQUFBLEdBQUFTLENBQUEsTUFBR0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUNsQixLQUFNLENBQUVDLGFBQWMsQ0FBQyxFQUFBWCxjQUFBLEdBQUFTLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQ3RELEtBQU0sQ0FBQUUsTUFBTSxFQUFBWixjQUFBLEdBQUFTLENBQUEsTUFBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFBVixjQUFBLEdBQUFTLENBQUEsTUFFaENJLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLFNBQVVDLE9BQU8sQ0FBRUMsUUFBUSxDQUFFQyxlQUFlLENBQUMsQ0FBQWpCLGNBQUEsR0FBQWtCLENBQUEsTUFBQWxCLGNBQUEsR0FBQVMsQ0FBQSxNQUU1RE4sVUFBVSxDQUFDWSxPQUFPLENBQUUsa0JBQWtCLENBQUMsQ0FBQWYsY0FBQSxHQUFBUyxDQUFBLE1BQ3ZDTCxnQkFBZ0IsQ0FBQ1ksUUFBUSxDQUFFLFVBQVUsQ0FBQyxDQUFBaEIsY0FBQSxHQUFBUyxDQUFBLE1BQ3RDTCxnQkFBZ0IsQ0FBQ2EsZUFBZSxDQUFFLHVCQUF1QixDQUFDLENBQUFqQixjQUFBLEdBQUFTLENBQUEsTUFFMUQsR0FBR08sUUFBUSxHQUFHQyxlQUFlLENBQUUsQ0FBQWpCLGNBQUEsR0FBQW1CLENBQUEsU0FBQW5CLGNBQUEsR0FBQVMsQ0FBQSxXQUFNLElBQUksQ0FBQUYsWUFBWSxDQUFDLGtEQUFrRCxDQUFDLENBQUQsQ0FBQyxLQUFBUCxjQUFBLEdBQUFtQixDQUFBLFVBQUFuQixjQUFBLEdBQUFTLENBQUEsTUFFekcsTUFBTyxDQUFBRSxhQUFhLENBQUNTLFFBQVEsQ0FBQ0wsT0FBTyxDQUFDLENBQUNNLElBQUksQ0FBRUMsS0FBSyxFQUFLLENBQUF0QixjQUFBLEdBQUFrQixDQUFBLE1BQUFsQixjQUFBLEdBQUFTLENBQUEsT0FFbkQsR0FBSSxDQUFDYSxLQUFLLENBQUUsQ0FBQXRCLGNBQUEsR0FBQW1CLENBQUEsU0FBQW5CLGNBQUEsR0FBQVMsQ0FBQSxZQUFNLElBQUksQ0FBQUgsY0FBYyxDQUFDLDBCQUEwQixDQUFDLENBQUQsQ0FBQyxLQUFBTixjQUFBLEdBQUFtQixDQUFBLFVBRWhFLEtBQU0sQ0FBQUksS0FBSyxFQUFBdkIsY0FBQSxHQUFBUyxDQUFBLE9BQUdHLE1BQU0sQ0FBQ1ksV0FBVyxDQUFDUixRQUFRLENBQUVNLEtBQUssQ0FBQ04sUUFBUSxDQUFDLEVBQUFoQixjQUFBLEdBQUFTLENBQUEsT0FFMUQsR0FBSSxDQUFDYyxLQUFLLENBQUUsQ0FBQXZCLGNBQUEsR0FBQW1CLENBQUEsU0FBQW5CLGNBQUEsR0FBQVMsQ0FBQSxZQUFNLElBQUksQ0FBQUQsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUQsQ0FBQyxLQUFBUixjQUFBLEdBQUFtQixDQUFBLFVBQUFuQixjQUFBLEdBQUFTLENBQUEsT0FFakQsTUFBTyxDQUFBRSxhQUFhLENBQUNjLFNBQVMsQ0FBQyxDQUFDQyxHQUFHLENBQUVYLE9BQU8sQ0FBQyxDQUFDLENBQ2xELENBQUMsQ0FBQyxDQUVKLENBQUMifQ==