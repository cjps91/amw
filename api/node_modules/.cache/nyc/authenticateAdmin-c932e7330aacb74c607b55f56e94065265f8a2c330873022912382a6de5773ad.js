function cov_l8uyxehe4(){var path="/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/authenticateAdmin.js";var hash="ba523a83f1cd3be7332591b1bf803f5be6feb90d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/carlos/workspace/isdi-parttime-202303/staff/carlos-perez/fullstack/project/api/logic/administrator/authenticateAdmin.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:18}},"1":{start:{line:5,column:26},end:{line:5,column:54}},"2":{start:{line:6,column:15},end:{line:6,column:34}},"3":{start:{line:8,column:0},end:{line:22,column:1}},"4":{start:{line:9,column:4},end:{line:9,column:24}},"5":{start:{line:10,column:4},end:{line:10,column:30}},"6":{start:{line:11,column:4},end:{line:21,column:8}},"7":{start:{line:12,column:22},end:{line:12,column:60}},"8":{start:{line:14,column:8},end:{line:14,column:62}},"9":{start:{line:14,column:20},end:{line:14,column:62}},"10":{start:{line:16,column:22},end:{line:16,column:68}},"11":{start:{line:18,column:8},end:{line:18,column:60}},"12":{start:{line:18,column:20},end:{line:18,column:60}},"13":{start:{line:20,column:8},end:{line:20,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:17},end:{line:8,column:18}},loc:{start:{line:8,column:38},end:{line:22,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:24},end:{line:21,column:5}},line:11}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:14,column:62}},type:"if",locations:[{start:{line:14,column:8},end:{line:14,column:62}},{start:{line:14,column:8},end:{line:14,column:62}}],line:14},"1":{loc:{start:{line:18,column:8},end:{line:18,column:60}},type:"if",locations:[{start:{line:18,column:8},end:{line:18,column:60}},{start:{line:18,column:8},end:{line:18,column:60}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ba523a83f1cd3be7332591b1bf803f5be6feb90d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_l8uyxehe4=function(){return actualCoverage;};}return actualCoverage;}cov_l8uyxehe4();const{validators:{validateEmail,validatePassword},errors:{ExistenceError,AuthError}}=(cov_l8uyxehe4().s[0]++,require('com'));const{Administrator}=(cov_l8uyxehe4().s[1]++,require('../../data/models'));const bcrypt=(cov_l8uyxehe4().s[2]++,require('bcryptjs'));cov_l8uyxehe4().s[3]++;module.exports=(email,password)=>{cov_l8uyxehe4().f[0]++;cov_l8uyxehe4().s[4]++;validateEmail(email);cov_l8uyxehe4().s[5]++;validatePassword(password);cov_l8uyxehe4().s[6]++;return(async()=>{cov_l8uyxehe4().f[1]++;const admin=(cov_l8uyxehe4().s[7]++,await Administrator.findOne({email}));cov_l8uyxehe4().s[8]++;if(!admin){cov_l8uyxehe4().b[0][0]++;cov_l8uyxehe4().s[9]++;throw new ExistenceError('user not found');}else{cov_l8uyxehe4().b[0][1]++;}const match=(cov_l8uyxehe4().s[10]++,await bcrypt.compare(password,admin.password));cov_l8uyxehe4().s[11]++;if(!match){cov_l8uyxehe4().b[1][0]++;cov_l8uyxehe4().s[12]++;throw new AuthError('wrong credentials');}else{cov_l8uyxehe4().b[1][1]++;}cov_l8uyxehe4().s[13]++;return admin.id;})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfbDh1eXhlaGU0IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0b3JzIiwidmFsaWRhdGVFbWFpbCIsInZhbGlkYXRlUGFzc3dvcmQiLCJlcnJvcnMiLCJFeGlzdGVuY2VFcnJvciIsIkF1dGhFcnJvciIsInMiLCJyZXF1aXJlIiwiQWRtaW5pc3RyYXRvciIsImJjcnlwdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbWFpbCIsInBhc3N3b3JkIiwiZiIsImFkbWluIiwiZmluZE9uZSIsImIiLCJtYXRjaCIsImNvbXBhcmUiLCJpZCJdLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZUFkbWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtcbiAgICB2YWxpZGF0b3JzOiB7IHZhbGlkYXRlRW1haWwsIHZhbGlkYXRlUGFzc3dvcmQgfSxcbiAgICBlcnJvcnM6IHsgRXhpc3RlbmNlRXJyb3IsIEF1dGhFcnJvciB9XG59ID0gcmVxdWlyZSgnY29tJylcbmNvbnN0IHsgQWRtaW5pc3RyYXRvciB9ID0gcmVxdWlyZSgnLi4vLi4vZGF0YS9tb2RlbHMnKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IChlbWFpbCwgcGFzc3dvcmQpID0+IHtcbiAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkbWluID0gYXdhaXQgQWRtaW5pc3RyYXRvci5maW5kT25lKHsgZW1haWwgfSlcblxuICAgICAgICBpZiAoIWFkbWluKSB0aHJvdyBuZXcgRXhpc3RlbmNlRXJyb3IoJ3VzZXIgbm90IGZvdW5kJylcblxuICAgICAgICBjb25zdCBtYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBhZG1pbi5wYXNzd29yZClcblxuICAgICAgICBpZiAoIW1hdGNoKSB0aHJvdyBuZXcgQXV0aEVycm9yKCd3cm9uZyBjcmVkZW50aWFscycpXG5cbiAgICAgICAgcmV0dXJuIGFkbWluLmlkXG4gICAgfSkoKVxufSJdLCJtYXBwaW5ncyI6Imd3RUFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQ0ZFLFVBQVUsQ0FBRSxDQUFFQyxhQUFhLENBQUVDLGdCQUFpQixDQUFDLENBQy9DQyxNQUFNLENBQUUsQ0FBRUMsY0FBYyxDQUFFQyxTQUFVLENBQ3hDLENBQUMsRUFBQVAsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxhQUFjLENBQUMsRUFBQVYsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUN0RCxLQUFNLENBQUFFLE1BQU0sRUFBQVgsYUFBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBQVQsYUFBQSxHQUFBUSxDQUFBLE1BRWxDSSxNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUFDQyxLQUFLLENBQUVDLFFBQVEsR0FBSyxDQUFBZixhQUFBLEdBQUFnQixDQUFBLE1BQUFoQixhQUFBLEdBQUFRLENBQUEsTUFDbENMLGFBQWEsQ0FBQ1csS0FBSyxDQUFDLENBQUFkLGFBQUEsR0FBQVEsQ0FBQSxNQUNwQkosZ0JBQWdCLENBQUNXLFFBQVEsQ0FBQyxDQUFBZixhQUFBLEdBQUFRLENBQUEsTUFDMUIsTUFBTyxDQUFDLFNBQVksQ0FBQVIsYUFBQSxHQUFBZ0IsQ0FBQSxNQUNoQixLQUFNLENBQUFDLEtBQUssRUFBQWpCLGFBQUEsR0FBQVEsQ0FBQSxNQUFHLEtBQU0sQ0FBQUUsYUFBYSxDQUFDUSxPQUFPLENBQUMsQ0FBRUosS0FBTSxDQUFDLENBQUMsRUFBQWQsYUFBQSxHQUFBUSxDQUFBLE1BRXBELEdBQUksQ0FBQ1MsS0FBSyxDQUFFLENBQUFqQixhQUFBLEdBQUFtQixDQUFBLFNBQUFuQixhQUFBLEdBQUFRLENBQUEsV0FBTSxJQUFJLENBQUFGLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQU4sYUFBQSxHQUFBbUIsQ0FBQSxVQUV0RCxLQUFNLENBQUFDLEtBQUssRUFBQXBCLGFBQUEsR0FBQVEsQ0FBQSxPQUFHLEtBQU0sQ0FBQUcsTUFBTSxDQUFDVSxPQUFPLENBQUNOLFFBQVEsQ0FBRUUsS0FBSyxDQUFDRixRQUFRLENBQUMsRUFBQWYsYUFBQSxHQUFBUSxDQUFBLE9BRTVELEdBQUksQ0FBQ1ksS0FBSyxDQUFFLENBQUFwQixhQUFBLEdBQUFtQixDQUFBLFNBQUFuQixhQUFBLEdBQUFRLENBQUEsWUFBTSxJQUFJLENBQUFELFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFELENBQUMsS0FBQVAsYUFBQSxHQUFBbUIsQ0FBQSxVQUFBbkIsYUFBQSxHQUFBUSxDQUFBLE9BRXBELE1BQU8sQ0FBQVMsS0FBSyxDQUFDSyxFQUFFLENBQ25CLENBQUMsRUFBRSxDQUFDLENBQ1IsQ0FBQyJ9